(function(b){var a=function(c){return b("#"+c)};b.fn.candor=function(l){var d={TextContent:"输入关键字",LabelArr:[],ShowBody:"",ListToA:"",ChangeS:"",TextWidth:360,isFocus:false};var l=b.extend(d,l);var h=l.LabelArr,i=l.TextContent,k=this.parent();var j=l.isFocus,f=this;b(this).bind("click",function(){if(b.trim(b(this).val())==i){b(this).val("").addClass("on")}e(f);j=true}).bind("blur",function(){if(b.trim(b(this).val())==""){b(this).val(i).removeClass("on")}j=false});a(l.ShowBody).bind("click",function(){j=true}).bind("blur",function(){j=false});a(l.ListToA+" a").bind("click",function(m){var p=g(m,"dl");var n=b(this).attr("class");var o=b(this).attr("data");a(p+" a").each(function(){b(this).removeClass("on")});if(n=="on"){b(this).removeClass("on");a("s-"+p).remove();c();return}b(this).addClass("on");if(p&&typeof(o)!="undefined"){if(a("s-"+p).length>0){var q="<input type='hidden' name='"+h[p]+"' value='"+o+"' />"+b(this).html()+"<span></span>";a("s-"+p).html(q)}else{var q="<label id='s-"+p+"'>";q+="<input type='hidden' name='"+h[p]+"' value='"+o+"' />"+b(this).html();q+="<span></span></label>";a(l.ChangeS).append(q)}}c()});a(l.ChangeS+" label span").live("click",function(m){var o=g(m,"label"),n=o.split("s-");a(o).remove();a(n[1]+" dd a").each(function(){b(this).removeClass("on")});c();j=true});b(".search_b_r").bind("click",function(){j=j==true?false:true});var g=function(m,n){var m=window.event?window.event:m,o=m.srcElement||m.target;while(o.nodeName.toLowerCase()!=n){o=o.parentNode}if(o.id!=null&&o!=null){return o.id}};var c=function(){var n=l.TextWidth;var m=a(l.ChangeS).width();k.css("width",(n-m)+"px")};var e=function(o){var n=o.parents("div.search_info").offset().left,p=o.parents("div.search_info").offset().top,m=o.parents("div.search_info").height();a(l.ShowBody).css({left:n+3+"px",top:p+m-3+"px"})};window.document.onclick=function(m){setTimeout(function(){if(j){a(l.ShowBody).show()}else{a(l.ShowBody).hide()}},200)}}})(jQuery);